title: $:/plugins/linonetwo/workflow-editor/tiddlywiki-ui/PageLayout/Workflow
name: <<lingo Name $:/plugins/linonetwo/workflow-editor/language/>>
description: <<lingo Description $:/plugins/linonetwo/workflow-editor/language/>>
tags: $:/tags/Layout
icon: $:/plugins/linonetwo/workflow-editor/tiddlywiki-ui/PageLayout/workflow-icon

\whitespace trim
\define containerClasses()
tc-page-container tc-page-view-$(storyviewTitle)$ tc-language-$(languageTitle)$ workflow-editor-layout-container
\end
\import [subfilter{$:/core/config/GlobalImportFilter}]
\define lingo-base() $:/plugins/linonetwo/workflow-editor/language/
\procedure redirected-navigate-actions()
  <$action-setfield $tiddler="$:/layout" text="" />
  <$action-navigate $to=<<event-navigateTo>> />
\end

<$vars
	tv-config-toolbar-icons={{$:/config/Toolbar/Icons}}
	tv-config-toolbar-text={{$:/config/Toolbar/Text}}
	tv-config-toolbar-class={{$:/config/Toolbar/ButtonClass}}
	tv-show-missing-links={{$:/config/MissingLinks}}
	storyviewTitle={{$:/view}}
	languageTitle={{{ [{$:/language}get[name]] }}}>
	<$navigator story="$:/StoryList" history="$:/HistoryList" openLinkFromInsideRiver={{$:/config/Navigation/openLinkFromInsideRiver}} openLinkFromOutsideRiver={{$:/config/Navigation/openLinkFromOutsideRiver}} relinkOnRename={{$:/config/RelinkOnRename}}>
		<$messagecatcher $tm-navigate=<<redirected-navigate-actions>>>
			{{$:/core/ui/CommandPaletteTemplate}}
			<div class=<<containerClasses>>>
				<% if [{$:/state/Workflow/PageLayout/focusedTiddler}match[]] %>
					<main class="workflow-editor-layout-main-area">
						<$workflow tiddler="$:/plugins/linonetwo/workflow-editor/examples/WorkflowTutorial" height="100vh" focused="yes" readonly="yes" />
					</main>
				<% else %>
					<!-- default value, when first opened, select widget's state tiddler is empty, but default value filter gives a value, we show that tiddler -->
					<main class="workflow-editor-layout-main-area">
						<$workflow tiddler={{$:/state/Workflow/PageLayout/focusedTiddler}} height="100vh" focused="yes" />
					</main>
				<% endif %>
			</div>
		</$messagecatcher>
	</$navigator>
</$vars>
